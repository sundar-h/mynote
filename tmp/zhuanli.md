# 基于文件树(Mekle树)的差分算法

1. 制作索引文件
2. 对比索引文件
3. 制作差分包

## 制作索引树

如图组织的目录树：Merkle树

* 最下面的叶节点包含存储数据或其哈希值
* 非叶子节点（包括中间节点和根节点）都是它的两个孩子节点内容的哈希值。

对文件组织目录树. F代表文件，D代表目录，每个节点标识，以该节点为根的多叉树的Hash索引值

叶子结点表示为具体的文件的指纹(hash索引)



## 对比索引树

目标: 找出差异文件或目录: 时间复杂度为 O(lgN).

在两颗目录树中，从根节点开始深度遍历，

记录下不同的节点路径，如图: 文件H和K有差异的话

记录差异路径树: 橙色部分



## 制作差分包

根据差分索引路径树，打包目录文件和差分索引树信息种子



## 下载差分包并校验

下载差分包，解压安装到相应的路径树种

校验索引树, 从根节点遍历索引树，



